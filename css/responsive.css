/* ══════════════════════════════════════════════════════════
   AetherIDE — Responsive v2 (Mobile-First Optimized)
   ══════════════════════════════════════════════════════════ */

/* ── Tablet ── */
@media (max-width: 1024px) {
    :root { --sidebar-width: 256px; }

    .split-container { flex-direction: column; }
    .code-panel { border-left: none; border-top: 1px solid var(--border-primary); }
    .chat-panel, .code-panel { min-width: unset; }
    .panel-resizer { display: none; }
}

/* ── Mobile ── */
@media (max-width: 768px) {
    /* Sidebar → Drawer */
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: 85vw;
        max-width: 320px;
        transform: translateX(-100%);
        transition: transform 0.28s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: none;
    }

    .sidebar.open {
        transform: translateX(0);
        box-shadow: var(--shadow-lg);
    }

    .sidebar-close-btn { display: flex; }

    .mobile-menu-btn { display: flex; }

    /* Mobile Tab Bar */
    .mobile-tab-bar { display: flex; }

    /* Hide desktop elements */
    .statusbar { display: none; }
    .panel-resizer { display: none; }

    /* Single panel view */
    .split-container { flex-direction: column; }

    .chat-panel {
        flex: 1;
        border-left: none;
        display: flex;
    }

    .code-panel {
        display: none;
        border-left: none;
        border-top: 1px solid var(--border-primary);
        flex: 1;
    }

    /* Mobile panel transitions */
    .panel-enter {
        animation: panelSlideIn 0.25s ease;
    }

    @keyframes panelSlideIn {
        from { opacity: 0; transform: translateY(8px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Topbar */
    .topbar { padding: 0 6px; height: 44px; gap: 4px; }
    .topbar-divider { display: none; }
    .current-model { display: none; }
    .thinking-label { display: none; }

    /* Welcome */
    .welcome-icon,
    .welcome-logo-wrap svg.lucide { width: 42px; height: 42px; }
    .welcome-glow { inset: -16px; }
    .welcome-title { font-size: 1.3rem; }
    .welcome-subtitle { font-size: 0.78rem; margin-bottom: 16px; }
    .welcome-cards { grid-template-columns: 1fr 1fr; gap: 6px; max-width: 100%; }
    .welcome-card { padding: 10px 12px; }
    .card-lucide-icon { width: 18px; height: 18px; }
    .card-text { font-size: 0.72rem; }

    /* Messages */
    .messages-container { padding: 12px 10px; }
    .message { gap: 8px; margin-bottom: 12px; }
    .message-avatar { width: 28px; height: 28px; }
    .message-avatar svg.lucide { width: 13px; height: 13px; }
    .message-body { font-size: 0.84rem; line-height: 1.6; }

    /* Input */
    .input-area { padding: 6px 8px 8px; }
    .message-input { font-size: 16px; }

    .input-wrapper {
        border-radius: var(--radius-xl);
        padding: 4px 4px 4px 12px;
    }

    /* Mode buttons mobile */
    .mode-desc { display: none !important; }
    .mode-btn { min-height: 38px; padding: 8px 10px; gap: 8px; }
    .mode-btn svg.lucide { width: 16px; height: 16px; }
    .mode-name { font-size: 0.8rem; }
    .beta-badge { font-size: 0.45rem; padding: 1px 4px; }

    /* Planner & Team */
    .planner-btn span { display: none; }
    .planner-btn { padding: 8px 12px; min-width: 44px; }

    .agent-chip span { display: none; }
    .agent-chip { min-width: 36px; justify-content: center; }

    /* Team mode mesaj taşma koruması */
    .message-content {
        overflow: hidden;
        min-width: 0;
    }

    /* Code */
    .code-header { height: 40px; padding: 0 8px; }
    .code-action-btn { width: 32px; height: 32px; }
    .code-action-btn svg.lucide { width: 14px; height: 14px; }
    .code-tab svg.lucide { width: 12px; height: 12px; }

    /* Modal */
    .modal {
        width: 100%;
        max-width: 100%;
        height: 100dvh;
        max-height: 100dvh;
        border-radius: 0;
    }

    .modal-body { padding: 16px; }

    .theme-options { gap: 6px; flex-wrap: wrap; }
    .theme-option { padding: 10px 12px; font-size: 0.78rem; flex: 1; min-width: 80px; }
    .theme-option svg.lucide { width: 15px; height: 15px; }

    /* Toast */
    .toast-container { top: auto; bottom: 60px; left: 10px; right: 10px; }
    .toast { max-width: 100%; font-size: 0.78rem; }
}

/* ── Small Mobile ── */
@media (max-width: 400px) {
    .sidebar { width: 100vw; max-width: 100vw; }

    .welcome-cards { grid-template-columns: 1fr; }
    .welcome-title { font-size: 1.15rem; }

    .planner-actions { gap: 4px; }
    .team-agents { gap: 4px; }

    .modal-footer { flex-direction: column; }
    .modal-btn { width: 100%; justify-content: center; }
}

/* ── Safe Areas (Notch phones) ── */
@supports (padding: env(safe-area-inset-bottom)) {
    .input-area {
        padding-bottom: calc(8px + env(safe-area-inset-bottom));
    }

    .statusbar {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .sidebar {
        padding-top: env(safe-area-inset-top);
    }

    .topbar {
        padding-top: env(safe-area-inset-top);
        height: calc(var(--topbar-height) + env(safe-area-inset-top));
    }

    .modal {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .toast-container {
        bottom: calc(60px + env(safe-area-inset-bottom));
    }
}

/* ── Desktop Large ── */
@media (min-width: 1440px) {
    :root { --sidebar-width: 296px; }
}

@media (min-width: 1920px) {
    :root { --sidebar-width: 312px; }
    html { font-size: 15px; }
}
